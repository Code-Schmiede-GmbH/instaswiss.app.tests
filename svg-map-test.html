<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SVG Map Test</title>
  <style>
    body { background: #222; color: #fff; font-family: sans-serif; }
    .svg-container { margin: 2rem auto; width: 1000px; background: #333; border-radius: 12px; box-shadow: 0 2px 12px #0008; padding: 2rem; }
    svg { width: 100%; height: auto; display: block; margin: 0 auto; background: #222; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>SVG Map Test</h1>
  <div class="svg-container" id="svg-map"></div>
  <script>
    function generateSwissSVGMap(data) {
      const coordinates = data.$last[0].location.coordinates;
      const longitude = coordinates[0];
      const latitude = coordinates[1];
      const inputSvg = `
      <svg viewBox="0 0 983 630" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M978.715 300.38L977.569 310.61L976.783 313.466L975.503 315.484L970.764 321.21L971.168 325.934L972.718 330.55L973.257 334.919L970.63 338.926L966.946 341.294L966.07 344.194L966.273 347.806L965.801 352.302L963.713 356.043L961.355 358.295L960.321 361.306L962.14 367.362L966.07 371.942L975.324 372.94L979.861 376.766L981.5 382.864L981.342 391.027L979.613 398.859L978.284 401.07L976.58 403.905L972.65 404.664L957.086 400.558L949.516 401.276L946.731 400.819L944.282 399.684L942.912 398.23L941.766 396.637L940.059 395.119L931.097 392.032L930.131 388.6L931.321 382.104L930.894 378.531L927.435 375.687L921.842 375.736L901.269 381.68L899.179 382.832L898.236 385.17L895.563 395.479L893.766 397.896L889.072 402.599L887.208 405.406L886.916 407.675L886.871 414.61L885.928 417.97L886.197 420.89L886.714 423.181L887.77 424.95L889.656 426.238L885.815 432.776L889.23 437.045L895.608 439.537L905.334 441.426L909.085 442.941L910.68 446.443L909.041 453.314L907.468 455.43L902.909 459.531L901.27 462.591L900.169 466.853L900.034 469.732L900.91 472.384L902.886 475.896L911.849 485.047L914.634 490.652L911.781 496.66L905.717 500.492L896.553 503.982L889.366 503.837L889.186 496.743L886.985 491.399L878.406 483.763L875.216 479.439L873.801 472.547L873.711 466.318L872.274 461.193L866.839 457.613L862.369 456.449L858.147 456.131L848.669 457.768L834.204 465.219L829.69 466.692L826.904 466.09L821.604 462.885L819.268 462.828L816.91 465.504L816.483 469.099L816.82 472.669L816.73 475.148L813.405 479.764L809.318 481.422L784.409 481.129L779.355 479.276L774.751 476.139L771.988 472.317L767.653 460.964L765.721 459.368L760.914 456.692L759.341 455.145L758.915 453.379L759.229 448.576L757.926 418.328L757.229 416.345L755.523 416.728L752.019 419.321L750.537 421.335L749.773 423.577L748.717 425.469L746.359 426.415L744.72 425.699L739.172 420.399L739.014 416.493L734.702 415.342L724.123 416.648L719.968 420.514L716.194 428.113L714.487 435.839L716.576 440.1L719.473 442.111L719.9 445.272L719.338 449.245L719.361 453.746L722.281 464.917L722.573 468.968L721.225 475.895L714.869 489.22L711.635 500.475L709.658 503.656L707.142 506.01L704.537 507.243L702.178 508.996L700.966 512.111L699.955 515.728L698.366 518.748L698.248 518.973L682.458 529.673L678.438 535.717L677.585 539.767L678.057 546.828L677.36 550.681L675.63 553.61L673.563 554.824L668.801 556.329L663.231 560.649L662.288 564.208L666.151 575.106L659.008 581.716L658.537 582.491L658.379 583.299L658.537 584.092L659.008 584.883L661.344 587.257L663.141 592.941L665.118 595.88L667.229 597.091L671.968 598.044L674.013 599.352L676.484 604.533L675.653 609.841L670.24 620.403L663.3 628.946L656.764 627.721L649.643 624.547L641.041 627.174L641.849 622.371L643.152 618.662L644.028 614.792L643.669 609.389L642.456 605.306L640.637 601.224L636.864 594.492L634.73 589.502L633.315 587.516L631.855 586.368L619.389 579.664L616.065 578.484L612.336 578.242L612.696 577.402L613.526 575.899L617.345 567.104L623.566 559.518L626.778 552.171L621.252 544.853L617.973 543.703L611.302 543.865L607.821 543.379L606.159 542.244L604.565 539.313L603.875 539.058L602.769 538.648L601.421 539.28L598.052 542.277L596.501 543.152L592.683 542.957L582.553 537.029L578.353 535.572L576.242 534.486L562.519 514.157L556.342 507.797L550.345 504.763L544.662 502.474L540.665 499.163L538.284 494.114L537.43 486.446L538.171 478.353L541.697 462.049L542.437 452.975L542.325 443.466L541.426 436.346L538.439 432.011L532.195 430.911L529.316 431.534L520.089 433.528L514.182 436.754L509.555 441.676L507.736 445.674L508.566 447.01L510.004 448.11L510.094 451.3L508.792 454.182L506.636 456.778L504.142 458.69L497.988 461.814L487.296 475.964L482.804 479.101L473.37 481.215L468.676 483.393L464.431 487.715L462.252 490.785L461.332 493.433L462.095 494.65L467.171 499.084L473.594 511.516L474.201 523.032L469.484 533.195L459.984 541.457L457.625 542.251L453.134 542.737L450.955 544.421L449.405 547.644L448.933 551.237L448.911 554.75L447.765 563.664L447.361 564.295L445.25 568.952L445.092 569.632L442.375 573.173L440.824 574.466L438.735 575.112L423.327 578.604L420.192 581.13L417.83 585.659L417.241 591.602L412.768 591.807L412.5 592.319L411.827 595.532L412.007 597.163L411.49 598.212L408.773 599.698L407.515 599.633L403.629 598.439L397.655 598.552L387.211 594.725L385.078 594.967L383.439 595.743L381.62 596.178L378.947 595.258L378.633 594.467L374.545 588.491L371.289 585.454L367.874 583.482L345.728 577.924L342.089 579.815L339.979 583.37L337.598 586.487L333.038 587.069L326.57 589.879L313.723 599.309L306.76 601.763L290.43 600.02L287.578 601.004L281.468 604.796L268.059 610.315L261.5 611.54L254.402 611.669L247.731 610.298L242.677 607.265L232.929 596.322L231.424 593.803L230.257 590.653L228.729 584.936L226.235 578.441L225.45 575.111L224.394 574.399L209.682 557.742L204.741 555.557L202.922 556.301L201.372 557.903L199.71 559.165L197.645 558.873L195.735 557.417L195.6 556.446L196.049 555.135L195.959 552.708L196.273 552.4L196.206 549.13L195.824 546.022L195.217 546.329L196.206 544.71L197.957 542.573L199.485 540.176L199.709 537.779L196.385 534.555L179.091 530.731L177.204 525.463L179.203 514.712L182.977 503.467L190.68 488.447L185.739 479.915L178.036 471.713L173.881 464.524L175.049 460.888L180.777 454.15L182.328 448.876L182.084 445.787L181.856 442.898L179.826 439.766L176.556 438.142L144.18 429.74L129.692 429.275L115.766 432.045L97.2361 444.787L90.1831 446.594L83.0414 446.928L76.3474 449.102L69.2945 455.232L63.0948 463.441L58.5129 469.687L57.3456 473.98L58.244 477.118L60.2434 482.466L60.356 483.734L62.4442 488.933L63.3651 490.265L65.6335 491.45L69.272 489.777L70.7997 490.443L71.9233 497.687L66.3079 503.646L52.4047 512.88L41.3092 525.902L34.2562 529.532L26.8667 526.226L16.961 526.616L7.1003 528.967L1.86655 532.095L4.76432 525.287L6.42588 522.126L7.1003 519.434L3.25912 514.601L1 510.299L1.80825 506.517L7.10958 503.141L20.137 496.744L20.4961 496.63L20.8551 496.597L21.2593 496.63L22.9658 497.182L24.2683 497.344L25.5257 497.198L30.3103 495.704L31.2537 493.609L31.051 490.702L31.1636 487.307L32.7139 478.402L33.432 475.947L36.5948 468.849L40.4612 460.169L40.1697 456.686L37.5197 451.916L34.3304 448.465L23.6456 441.882L22.6055 441.242L25.0991 438.848L25.5032 436.77L25.054 434.636V432.232L24.8964 431.262L24.3796 429.959L23.9079 428.475V426.861L24.7612 424.937L27.2324 422.263L34.8021 409.243L42.4831 399.514L37.2268 393.618L36.5537 389.452L39.474 385.612L68.6956 358.787L84.2603 350.216L86.4161 348.39L92.1441 341.911L99.3534 338.076L101.644 336.363L104.093 333.281L104.924 330.65L104.834 325.295L103.217 323.508L102.071 321.95L101.464 320.161L101.778 318.619L105.193 308.286L106.698 305.553L107.118 304.502L107.912 302.515L108.271 298.113L107.575 294.598L104.677 289.059L103.779 286.183L107.013 275.017L117.547 268.897L140.928 261.523L155.426 250.449L160.39 243.257L157.785 237.339L160.705 232.27L162.749 230.249L168.207 228.287L169.015 226.258L169.824 225.698L172.945 224.081L172.676 218.62L179.19 216.342L192.95 203.577L193.43 203.132L197.562 196.291L203.873 189.77L218.63 178.913L217.754 170.971L219.147 164.399L223.234 160.177L225.211 159.928L226.38 159.464L229.547 155.165L231.815 153.833L234.038 153.219L236.083 151.91L237.767 148.388L235.499 145.131L232.242 142.163L229.007 139.519L225.01 141.45L199.158 144.004L200.236 139.9L202.931 134.884L206.143 130.67L211.736 127.368L212.073 121.31L217.778 120.032L221.304 117.99L224.538 115.226L226.177 112.519L225.121 108.69L222.875 104.246L222.336 100.664L226.379 99.4254L228.31 97.9043L230.265 97.3968L232.242 97.9043L234.219 99.4254L239.856 100.248L250.683 98.3534L255.804 99.4254L258.634 101.063L259.037 101.128L261.532 101.528L267.439 100.931L263.485 110.052L264.72 115.3L269.437 118.14L275.816 120.148L276.714 120.87L277.321 122.025L278.197 123.187L279.881 123.901L281.341 123.603L289.561 120.017L295.312 118.805L301.362 119.065L310.406 119.453L312.508 118.603L316.447 117.012L319.535 112.959L320.736 111.383L321.431 108.377L321.072 106.566L320.016 105.062L319.298 104.281L318.197 102.295L318.175 100.317L320.712 99.5698L324.081 100.75L325.061 101.377L326.912 102.562L329.719 102.978L333.044 99.9699L333.425 99.4293L333.717 98.5151L333.739 97.6764L333.706 97.5558L333.515 96.8694L331.965 94.6832L331.493 93.386L331.785 92.3711L333.042 91.6887L335.288 92.171L337.04 91.5893L337.983 89.7515L337.916 86.5331L337.175 86.549L333.559 83.7705L333.042 83.5545L341.33 76.744L342.52 75.7662L347.731 72.8525L355.373 69.9587L355.491 69.9136L366.574 66.576L371.493 66.0592L368.64 74.1258L366.326 76.3651L361.207 76.32L360.643 76.3147L368.718 80.5984L371.874 82.2719L376.659 82.9119L386.195 80.927L394.761 79.1436L398.848 76.8142L402.308 72.6617L406.261 66.4594L409.315 68.0242L423.331 68.8735L424.656 70.2555L425.351 73.2765L425.778 76.2975L426.362 77.6622H454.64L464.411 75.4654L466.523 74.0251L467.489 72.6272L468.365 70.9961L470.206 68.8735L471.981 67.4915L476.698 64.9356L480.673 63.7444L482.155 62.1703L483.234 60.5962L484.357 59.8635L496.082 57.8813L500.012 57.8654L505.65 59.5985L508.166 59.8648L509.334 61.264L510.502 64.3711L512.03 67.477L514.163 68.8762L522.406 71.0743L536.309 71.1578L536.968 71.0465L543.002 70.0263L543.271 68.4945L545.808 62.9826L552.457 58.5677L558.971 57.9012L562.318 61.0494L564.9 65.4139L565.352 65.9717L567.302 68.378L570.223 67.3948L570.694 66.564L571.638 64.9051L571.884 62.4897L571.772 60.1987L572.041 57.9992L571.95 56.8915L571.434 55.6328L571.075 54.166L571.569 52.3826L572.355 51.6989L573.501 51.2656L574.444 51.2324L574.647 51.7492L574.782 53.7327L576.197 54.4495L577.432 46.807L575.455 46.6148L574.449 46.2014L571.973 45.1812L568.941 44.6644L558.385 46.4651L555.128 48.1068L552.118 50.2652L548.906 51.932L545.042 52.099L540.551 49.5325L534.98 45.2726L533.902 45.1056L530.487 43.8469L531.88 40.3529L531.341 37.6009L530.42 35.2397L530.666 32.8534L532.799 30.4088L538.302 27.3798L540.616 25.2094L542.255 18.7474L543.266 16.3929L546.208 12.0495L547.915 11.0306L550.341 11.0969L562.043 8.75825L565.323 7.08743L563.301 1.98883L566.76 0L572.173 0.300777L576.193 2.12265L576.53 4.47983L576.732 8.65755L577.496 12.5835L579.629 14.1788L582.324 12.4073L583.448 5.35564L585.424 3.28335L588.232 4.22013L590.322 7.4041L592.028 11.1472L593.645 13.7204L595.891 14.2305L598.294 13.7297L600.427 14.147L601.865 17.4132L601.281 18.6322L598.383 22.9993L597.663 25.1114L598.584 27.7495L600.313 29.8947L600.853 32.3565L601.279 34.4593L612.757 34.2923L610.982 32.2982L612.937 25.9647L618.776 26.2324L625.874 30.3796L631.489 35.7114L627.492 36.6455L627.514 38.8888L630.59 41.9733L630.749 42.1337L637.06 46.8613L642.383 48.2618L650.895 47.4536L658.802 44.9188L662.26 41.1505L666.37 39.5155L690.606 42.2503H702.622L705.565 46.8613L713.695 46.8533L722.141 48.8117L781.744 86.0442L782.957 91.7258L783.367 93.6537L789.791 103.361L797.876 107.065L804.097 112.564L803.917 126.177L801.806 131.056L793.383 141.727L792.372 144.604L791.249 150.255L790.418 152.458L783.006 161.419L776.02 173.289L772.427 179.394L768.676 190.185L768.159 200.952L769.821 206.238L772.179 210.845L773.998 215.963L774.111 222.779L772.044 227.035L768.72 230.465L766.182 233.888L766.429 236.864L771.325 238.315L784.598 240.531L789.068 239.106L793.133 240.185L804.52 238.768L808.158 239.32L849.216 252.305L848.857 255.937L849.778 256.727L851.125 256.619L851.956 257.608V259.485L851.058 262.532L850.518 270.003L849.823 273.434L850.182 276.419L852.945 280.349L858.335 284.492L881.582 292.011L889.982 300.021L894.878 302.862L904.267 305.883L907.285 305.998L908.759 306.055L914.374 304.455L923.852 299.618L926.075 296.373L926.66 293.942L926.84 291.264L927.873 287.237L931.175 281.655L934.701 280.998L938.924 282.108L944.336 281.854L944.449 275.909L948.245 268.604L953.725 262.3L960.036 258.669L961.226 258.431L962.439 258.669L963.585 259.418H963.607V259.467L965.853 261.886L970.39 269.211L977.779 275.101L979.711 277.419L980.879 282.788L978.184 293.595L978.715 300.38Z" fill="#fff" stroke="#E99D33" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;
      function drawPointOnSwissSVG(svgString, latitude, longitude) {
        const viewBox = { x: 0, y: 0, width: 983, height: 630 };
        const bounds = { latMin: 45.8179, latMax: 47.8085, lonMin: 5.9559, lonMax: 10.492 };
        const x = ((longitude - bounds.lonMin) / (bounds.lonMax - bounds.lonMin)) * viewBox.width;
        const y = ((bounds.latMax - latitude) / (bounds.latMax - bounds.latMin)) * viewBox.height;
        const circleElement = `<circle cx="${x.toFixed(2)}" cy="${y.toFixed(2)}" r="12" fill="#E99D33" stroke-width="1" />`;
        return svgString.replace('</svg>', `${circleElement}</svg>`);
      }
      const svgContent = drawPointOnSwissSVG(inputSvg, latitude, longitude);
      return { svgContent: svgContent.trim() };
    }
    const testData = {
      $last: [
        { location: { coordinates: [7.2051613024, 46.354031708] } }
      ]
    };
    const result = generateSwissSVGMap(testData);
    document.getElementById('svg-map').innerHTML = result.svgContent;
  </script>
</body>
</html>

@if (!apiKey()) {
  <app-api-key-input
    (apiKeySaved)="handleApiKeySaved($event)"
    (apiKeyRemoved)="clearApiKey()"
  ></app-api-key-input>
} @else {
  <div class="background-image"></div>
  <div class="app-vertical-stack">
    <!-- Dashboard always rendered, animation state controlled by dashboardAnimationState -->
    <div class="centered-abs">
      <app-dashboard-main-view
        [hikes]="hikes()"
        [totalHikeCount]="totalHikeCount()"
        (runTests)="runTests()"
        (removeApiKey)="clearApiKey()"
        (workViewRequested)="showTodoWork()"
        [@dashboardSlide]="dashboardAnimationState"
      >
      </app-dashboard-main-view>
    </div>
    <!-- Todo Work Modal -->
    @if (showTodoWorkViewModal()) {
      <div class="centered-abs">
        <app-todo-work (back)="hideTodoWork()" />
      </div>
    }
    <!-- Test Results Modal -->
    @if (showTestResultsModal()) {
      <div class="centered-abs">
        <app-test-results-view
          [testResults]="testResults()"
          [testsLoading]="testsLoading()"
          (backToDashboard)="backToDashboard()"
        ></app-test-results-view>
      </div>
    }
  </div>
}
